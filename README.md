# Enterprise RAG Challenge 

Данный репозиторий содержит реализацию Retrieval-Augmented Generation системы,
разработанной в рамках задания **Enterprise RAG Challenge**.

Система предназначена для автоматического ответа на вопросы
на основе статей в формате PDF-документов.

---

## Описание решения

### Архитектура пайплайна

1. **Извлечение текста из PDF**
   - Используется `PyPDFLoader`
   - Для каждой страницы сохраняются метаданные:
     - `pdf_sha1` — хеш файла
     - `page_index` — номер страницы
   - Реализовано кэширование результатов парсинга (для ускорения тестирования)

2. **Разбиение текста на чанки**
   - Алгоритм: `RecursiveCharacterTextSplitter`
   - Размер чанка: 1800 символов
   - Перекрытие: 200 символов

3. **Векторизация и индексация**
   - Векторное хранилище: **FAISS**
   - Модель эмбеддингов:
     ```
     sentence-transformers/all-MiniLM-L6-v2
     ```
   - Индекс сохраняется на диск и переиспользуется при повторных запусках

4. **Поиск релевантного контекста**
   - Поиск сходств по FAISS
   - В LLM передаётся только извлечённый контекст

5. **Генерация ответа**
   - Локальная LLM через **Ollama**
   - Используемая модель:
     ```
     llama3
     ```
   - Строгий промт, ориентированный на:
     - минимальный формат ответа
     - отсутствие галлюцинаций
     - числовую нормализацию

6. **Постобработка**
   - Преобразование чисел 
   - Нормализация boolean-ответов
   - Формирование итогового submission-файла

---



##  Установка и запуск

### 1. Установка Ollama и загрузка модели
Скачайте Ollama с оффициального сайта:

https://ollama.com/

После установки загрузите нужную модель:

```bash
ollama pull llama3
```

### 2. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 3. Данные
Необходимые для запуска данные уже находятся в репозитории:
- pdf-документы в **data/pdfs/**
- файл с вопросами в **data/questions.json**

### 3. Запуск решения
Для запуска пайплайна выполните:
```bash
python main.py
```

### Результат
После выполнения пайплайна будут созданы:
- **submission_Kosenko_v4.json** - submission-файл;
- **cache/** - папка с результатами парсинга для ускорения повторных запусков;
- **faiss_index/** - папка с индексами для ускорения повторных запусков.

